@using ChronoLog.Core.Interfaces
@inject IEmployeeContextService EmployeeContextService

<RadzenPanelMenu DisplayStyle="@(IsExpanded ? MenuItemDisplayStyle.IconAndText : MenuItemDisplayStyle.Icon)" 
                 ShowArrow="false">
    <RadzenPanelMenuItem Text="Overview" Icon="calendar_today" Path="/" />
    <RadzenPanelMenuItem Text="Evaluation" Icon="assessment" Path="evaluation" />
    <RadzenPanelMenuItem Text="Time Balance" Icon="schedule" Path="timebalance" />
    @if (_showProjects)
    {
        <RadzenPanelMenuItem Text="Projects" Icon="work" Path="projects" />
    }
    @if (_showUserManagement)
    {
        <RadzenPanelMenuItem Text="User Management" Icon="manage_accounts" Path="usermanagement" />
    }
</RadzenPanelMenu>

@code {
    [Parameter]
    public bool IsExpanded { get; set; }

    private bool _showProjects;
    private bool _showUserManagement;

    protected override async Task OnInitializedAsync()
    {
        var employee = await EmployeeContextService.GetOrCreateCurrentEmployeeAsync();
        _showProjects = employee.IsAdmin == true || employee.IsProjectManager == true;
        _showUserManagement = employee.IsAdmin == true;
    }
}